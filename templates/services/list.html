{% extends "base/dashboard.html" %}
{% set title = "Services" %}
{% set active = "services" %}

{% block content %}

<!-- HEADER -->
<div class="card">
    <h3 class="card-title">ðŸ’ª Services</h3>
    <p class="muted">
        Browse available services and book your training session
    </p>
</div>

<!-- FILTERS -->
<div class="card">
    <div style="display:flex; justify-content:space-between; align-items:center; flex-wrap:wrap; gap:16px;">
        <div>
            <p class="muted"><b>Category</b></p>
            <div class="service-categories">
                {% for c in categories %}
                    {% if category == c %}
                        <span class="category active">{{ c|capitalize }}</span>
                    {% else %}
                        <a href="/services?category={{ c }}{% if sort_by %}&sort={{ sort_by }}{% endif %}" class="category">
                            {{ c|capitalize }}
                        </a>
                    {% endif %}
                {% endfor %}
            </div>
        </div>

        <!-- SORTING -->
        <div>
            <p class="muted"><b>Sort by</b></p>
            <div class="service-sorting">
                <a href="/services?sort=name{% if category != 'all' %}&category={{ category }}{% endif %}"
                   class="{% if sort_by == 'name' %}active{% endif %}">
                   Name
                </a>
                <a href="/services?sort=price{% if category != 'all' %}&category={{ category }}{% endif %}"
                   class="{% if sort_by == 'price' %}active{% endif %}">
                   Price
                </a>
                <a href="/services?sort=duration{% if category != 'all' %}&category={{ category }}{% endif %}"
                   class="{% if sort_by == 'duration' %}active{% endif %}">
                   Duration
                </a>
            </div>
        </div>
    </div>
</div>

<!-- SERVICES LIST -->
{% if services %}
    {% for s in services %}
    <div class="card service-card">

        <div class="service-info">
            <h4 class="service-name">{{ s.name }}</h4>
            <p class="muted">
                {{ s.description if s.description else
                   "This service is designed to help you achieve better fitness results." }}
            </p>
        </div>

        <div class="service-meta">
            <div class="service-price">
                {{ s.price }} $
            </div>

            <div class="service-actions">
                <a href="/services/{{ s.id }}" class="btn-sm">Details</a>
                <a href="/book/{{ s.id }}" class="btn-sm primary">Book</a>
            </div>
        </div>

    </div>
    {% endfor %}
{% else %}
    <div class="card">
        <p class="muted">No services found.</p>
        <a href="/services" class="auth-btn" style="margin-top:10px;">Reset filters</a>
    </div>
{% endif %}

<style>
/* Categories */
.service-categories a,
.service-categories span.category {
    margin-right: 12px;
    text-decoration: none;
    padding: 4px 10px;
    border-radius: 6px;
    background: #f3f4f6;
    color: #1f2937;
    font-weight: 500;
}
.service-categories span.active {
    background: #4f46e5;
    color: white;
}

/* Sorting */
.service-sorting a {
    margin-right: 12px;
    text-decoration: none;
    color: #4f46e5;
    font-weight: 500;
}
.service-sorting a.active {
    font-weight: bold;
    color: #1e40af;
    text-decoration: underline;
}

/* Card styling */
.service-card {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 16px;
    margin: 12px 0;
    border-radius: 12px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.05);
}
.service-info { max-width: 70%; }
.service-meta { text-align: right; }
.service-actions a { margin-left: 6px; }
</style>

{% endblock %}
